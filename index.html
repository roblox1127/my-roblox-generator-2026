<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    
    <link rel="icon" type="image/png" href="https://upload.wikimedia.org/wikipedia/commons/c/c7/Robux_2019_Logo_gold.svg">
    <title>Free Robux Generator 2026 - Claim Now</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700;900&family=Fredoka+One&family=Inter:wght@400;600;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <style>
    .instruction-steps {
    padding: 0 15px;
    margin-bottom: 20px;
    display: flex;
    flex-direction: column;
    gap: 12px;
}

.step-item {
    display: flex;
    align-items: center;
    gap: 15px;
    background: rgba(255, 255, 255, 0.03);
    padding: 10px;
    border-radius: 8px;
    border: 1px solid rgba(255, 255, 255, 0.05);
}

.step-num {
    background: var(--primary);
    color: #000;
    width: 24px;
    height: 24px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: 900;
    font-size: 12px;
    flex-shrink: 0;
}

.step-txt {
    font-size: 12px;
    color: #ccc;
    line-height: 1.4;
    text-align: left;
}

.step-txt b {
    color: #fff;
}

    #searchIcon {
    animation: breath 1.5s infinite ease-in-out;
}
@keyframes breath {
    0%, 100% { transform: scale(1); opacity: 0.6; }
    50% { transform: scale(1.2); opacity: 1; }
}

    .pulse-ring {
    content: '';
    width: 100px;
    height: 100px;
    background: var(--primary);
    border: 5px solid var(--primary);
    border-radius: 50%;
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    animation: pulsate 1.5s infinite;
    opacity: 0;
}

@keyframes pulsate {
    0% { transform: translate(-50%, -50%) scale(0.1); opacity: 1; }
    100% { transform: translate(-50%, -50%) scale(1.5); opacity: 0; }
}

    @keyframes flashStatus {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.3; }
}
        /* --- ORIGINAL STRUCTURE CSS --- */
        :root { --primary: #00b06f; --dark: #191b1d; --card-bg: #2b2d31; --text: #ffffff; --gray: #b8b8b8; --border: rgba(255,255,255,0.1); --alert: #ffbd2e; --error: #ff4757; }
        * { margin: 0; padding: 0; box-sizing: border-box; user-select: none; -webkit-tap-highlight-color: transparent; }
        body { font-family: 'Montserrat', sans-serif; background-color: var(--dark); color: var(--text); min-height: 100vh; display: flex; flex-direction: column; align-items: center; overflow-x: hidden; background-image: radial-gradient(#2b2d31 1px, transparent 1px); background-size: 20px 20px; }
        
        #content-wrapper { width: 100%; display: flex; flex-direction: column; align-items: center; padding-top: 70px; padding-bottom: 50px; }
        .navbar { width: 100%; height: 60px; background: #232527; border-bottom: 1px solid var(--border); padding: 0 20px; display: flex; justify-content: space-between; align-items: center; position: fixed; top: 0; z-index: 100; box-shadow: 0 4px 15px rgba(0,0,0,0.5); }
        .nav-logo { font-weight: 900; font-size: 18px; letter-spacing: 0.5px; display: flex; align-items: center; gap: 8px; }
        .nav-logo img { width: 24px; filter: invert(1); }
        .user-counter { background: rgba(0,0,0,0.3); padding: 5px 12px; border-radius: 20px; font-size: 11px; font-weight: 700; display: flex; align-items: center; gap: 6px; border: 1px solid var(--border); }
        .live-dot { width: 8px; height: 8px; background: var(--primary); border-radius: 50%; animation: blink 2s infinite; }
        @keyframes blink { 0%, 100% { opacity: 1; } 50% { opacity: 0.4; } }

        .step-progress { display: flex; align-items: center; justify-content: center; gap: 10px; margin-top: 85px; margin-bottom: 15px; width: 100%; max-width: 450px; }
        .p-dot { width: 10px; height: 10px; border-radius: 50%; background: #333; position: relative; }
        .p-dot.active { background: var(--primary); box-shadow: 0 0 10px var(--primary); }
        .p-line { width: 30px; height: 2px; background: #333; }
        .p-line.active { background: var(--primary); }

        #toast-container { position: fixed; bottom: 20px; left: 20px; z-index: 9999; pointer-events: none; }
        .toast-item { background: rgba(35, 37, 39, 0.98); border-left: 4px solid var(--primary); padding: 10px 15px; border-radius: 12px; color: #fff; font-size: 11px; margin-top: 10px; box-shadow: 0 10px 25px rgba(0,0,0,0.5); display: flex; align-items: center; gap: 12px; backdrop-filter: blur(8px); animation: slideIn 0.5s ease forwards; border: 1px solid var(--border); width: 260px; }
        @keyframes slideIn { from { transform: translateX(-100%); opacity: 0; } to { transform: translateX(0); opacity: 1; } }
        .toast-avatar { width: 35px; height: 35px; border-radius: 50%; border: 2px solid var(--primary); background: #000; object-fit: cover; }

        .trust-row { display: flex; justify-content: center; gap: 12px; margin-top: 20px; opacity: 0.7; padding-top: 15px; border-top: 1px solid var(--border); }
        .t-badge { font-size: 10px; font-weight: 800; color: var(--gray); display: flex; align-items: center; gap: 5px; }
        .t-badge i { color: var(--primary); }

        .main-container { width: 95%; max-width: 450px; padding-bottom: 50px; }
        .app-card { background: var(--card-bg); border-radius: 16px; padding: 25px; box-shadow: 0 10px 30px rgba(0,0,0,0.3); text-align: center; border: 1px solid var(--border); margin-bottom: 20px; position: relative; overflow: hidden; }
        
        h2 { font-weight: 900; font-size: 24px; margin-bottom: 5px; }
        .subtitle { color: var(--gray); font-size: 13px; margin-bottom: 25px; font-weight: 600; }
        
        .input-group { position: relative; margin-bottom: 20px; text-align: center; }
        .input-label { font-family: 'Fredoka One', cursive; font-size: 12px; color: var(--gray); margin-bottom: 10px; display: block; letter-spacing: 0.5px; text-transform: uppercase; text-align: center; }
        
        .form-input { width: 100%; background: rgba(0,0,0,0.2); border: 2px solid transparent; padding: 14px; border-radius: 10px; color: #fff; font-size: 16px; outline: none; transition: 0.3s; }
        .form-input:focus { border-color: var(--primary); box-shadow: 0 0 15px rgba(0, 176, 111, 0.2); }
        
        .platform-grid { display: flex; gap: 10px; margin-bottom: 25px; justify-content: center; }
        .platform-item { background: rgba(255,255,255,0.05); border: 1px solid var(--border); border-radius: 10px; width: 55px; height: 55px; cursor: pointer; display: flex; align-items: center; justify-content: center; font-size: 22px; color: var(--gray); transition: 0.2s; }
        .platform-item:hover, .platform-item.active { border-color: var(--primary); color: #fff; background: rgba(0, 176, 111, 0.15); }
        .btn-main { background: var(--primary); color: #fff; border: none; width: 100%; padding: 16px; border-radius: 10px; font-size: 18px; font-weight: 800; cursor: pointer; transition: 0.3s; text-transform: uppercase; letter-spacing: 1px; }

        .hidden-step { display: none; animation: fadeIn 0.4s ease; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        .avatar-wrapper { width: 110px; height: 110px; border-radius: 50%; background: #222; margin: 0 auto 15px; display: flex; align-items: center; justify-content: center; border: 4px solid #393b3f; position: relative; overflow: hidden; }
        .avatar-wrapper.found { border-color: var(--primary); box-shadow: 0 0 20px rgba(0, 176, 111, 0.3); }
        .avatar-img { width: 100%; height: 100%; object-fit: cover; display: none; position: absolute; top: 0; left: 0; border-radius: 50%; }

        .robux-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; }
        .robux-card { background: #393b3f; border: 2px solid transparent; border-radius: 12px; padding: 15px; cursor: pointer; transition: 0.2s; position: relative; overflow: hidden; }
        .robux-card:hover { transform: translateY(-3px); border-color: var(--primary); }
        .robux-amount { font-size: 18px; font-weight: 800; color: #fff; margin-top: 5px; display: block; }
        .robux-img { width: 45px; filter: drop-shadow(0 4px 4px rgba(0,0,0,0.3)); }
        .tag-popular { position: absolute; top: 0; right: 0; background: var(--alert); color: #000; font-size: 9px; padding: 3px 8px; border-bottom-left-radius: 8px; font-weight: 800; }

        .console-profile { display: flex; align-items: center; gap: 15px; margin-bottom: 15px; background: rgba(0,0,0,0.25); padding: 15px; border-radius: 12px; border: 1px solid var(--border); text-align: left; }
        .console-avatar { width: 60px; height: 60px; border-radius: 50%; border: 3px solid #333; object-fit: cover; background: #000; }
        .console-info b { color: var(--primary); font-size: 14px; }
        .console-info span { font-size: 13px; color: #fff; display: inline-block; font-family: 'Inter'; font-weight: 700; white-space: nowrap; }
        .console-box { background: #000; border-radius: 12px; padding: 15px; height: 180px; text-align: left; font-family: 'Courier New', monospace; font-size: 11px; overflow: hidden; border: 1px solid #333; margin-bottom: 20px; line-height: 1.6; }
        .progress-container { width: 100%; background: #333; height: 8px; border-radius: 4px; overflow: hidden; }
        .progress-bar { width: 0%; height: 100%; background: var(--alert); transition: width 0.1s linear; box-shadow: 0 0 10px var(--alert); }

        .modal-overlay { position: fixed; inset: 0; background: rgba(0, 0, 0, 0.95); z-index: 9999; display: none; justify-content: center; align-items: center; backdrop-filter: blur(10px); padding: 20px; }
        .modal-content { background: #161b22; width: 100%; max-width: 450px; border-radius: 15px; border: 2px solid var(--primary); box-shadow: 0 0 40px rgba(0,0,0,1); overflow: hidden; display: flex; flex-direction: column; animation: zoomIn 0.3s ease; max-height: 95vh; }
        .modal-header-br { background: #191b1d; padding: 15px; border-bottom: 1px solid var(--border); text-align: center; }
        .modal-header-br h2 { color: var(--primary); font-size: 1.4rem; font-weight: 900; text-transform: uppercase; margin: 0; }
        .modal-timer-bar { background: #000; padding: 12px; text-align: center; border-bottom: 1px solid #333; }
        .timer-txt { font-family: 'Inter'; color: #fff; font-size: 13px; font-weight: 700; }

        .modal-user-card { display: flex; align-items: center; gap: 15px; background: rgba(255,255,255,0.05); padding: 12px; border-radius: 10px; border: 1px solid var(--border); margin: 15px; text-align: left; }
        .modal-avatar-img { width: 55px; height: 55px; border-radius: 50%; border: 2px solid var(--primary); background: #000; object-fit: cover; }
        .modal-info-txt b { color: var(--primary); font-size: 14px; }
        .modal-info-txt span { font-size: 13px; color: #fff; display: inline-block; font-family: monospace; font-weight: 700; white-space: nowrap; }

        .firewall-alert { padding: 0 15px; margin-bottom: 15px; text-align: center; }
        .firewall-alert b { color: var(--error); font-size: 18px; display: block; margin-bottom: 8px; font-family: 'Fredoka One'; text-transform: uppercase; }
        .firewall-alert span { color: #ccc; font-size: 13px; line-height: 1.4; display: block; }
        
        .offer-card { display: flex; align-items: center; background: #252d37; border-radius: 8px; padding: 10px; margin: 0 15px 10px; text-decoration: none; color: #fff; border: 1px solid #333; transition: 0.3s; cursor: pointer; }
        .offer-btn-small { background: var(--primary); color: #000; border-radius: 6px; padding: 8px; font-size: 11px; font-weight: 800; text-align: center; min-width: 85px; }

        .tiktok-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.95); z-index: 99999; display: none; flex-direction: column; justify-content: center; align-items: center; text-align: center; padding: 20px; backdrop-filter: blur(10px); }
        .tiktok-icon { font-size: 50px; color: #fff; margin-bottom: 20px; animation: bounce 1s infinite; }
        .tiktok-title { color: #ff4757; font-size: 24px; margin-bottom: 15px; text-transform: uppercase; font-family: 'Montserrat', sans-serif; font-weight: 900; letter-spacing: 1px; }
        .tiktok-desc { font-family: 'Inter', sans-serif; color: #ccc; font-size: 14px; line-height: 1.6; max-width: 320px; margin-bottom: 30px; }
        .tiktok-arrow { font-size: 40px; color: var(--primary); animation: pointToMenu 1.5s infinite ease-in-out; position: absolute; top: 20px; right: 20px; transform: rotate(0deg); }
        @keyframes pointToMenu { 0% { transform: translate(0, 0) rotate(0deg); opacity: 1; } 50% { transform: translate(0, -10px) rotate(0deg); opacity: 0.6; } 100% { transform: translate(0, 0) rotate(0deg); opacity: 1; } }

        .comments-container { width: 100%; background: var(--card-bg); border-radius: 16px; padding: 20px; text-align: left; border: 1px solid var(--border); margin-top: 10px; }
        .comment-header { color: #fff; font-weight: 900; margin-bottom: 15px; font-size: 16px; display: flex; justify-content: space-between; align-items: center; }
        .live-status { font-size: 10px; color: #ff4757; display: flex; align-items: center; gap: 4px; font-weight: 700; text-transform: uppercase; animation: pulseRed 2s infinite; }
        .live-dot-chat { width: 6px; height: 6px; background: #ff4757; border-radius: 50%; animation: blink 1s infinite; }

        .comment-input-area { display: flex; gap: 10px; margin-bottom: 15px; background: rgba(0,0,0,0.2); padding: 10px; border-radius: 10px; border: 1px solid rgba(255,255,255,0.05); }
        .comment-input { flex: 1; background: transparent; border: none; color: #fff; font-family: 'Montserrat', sans-serif; font-size: 13px; outline: none; }
        .post-btn { background: var(--primary); color: #fff; border: none; padding: 8px 16px; border-radius: 6px; font-weight: bold; cursor: pointer; font-size: 11px; white-space: nowrap; }
        
        .comments-list { display: flex; flex-direction: column; gap: 10px; max-height: 250px; overflow-y: auto; position: relative; scrollbar-width: thin; scrollbar-color: #444 transparent; padding-right: 5px; }
        .comments-list::-webkit-scrollbar { width: 4px; }
        .comments-list::-webkit-scrollbar-thumb { background: #444; border-radius: 10px; }

        .comment-card { display: flex; gap: 10px; padding: 8px; background: rgba(255,255,255,0.03); border-radius: 10px; border-left: 2px solid transparent; animation: slideIn 0.3s ease; }
        .comment-card:hover { background: rgba(255,255,255,0.06); border-left-color: var(--primary); }

        .user-avatar { width: 32px; height: 32px; border-radius: 50%; background: #000; border: 1px solid rgba(255,255,255,0.2); flex-shrink: 0; overflow: hidden; }
        .user-avatar img { width: 100%; height: 100%; object-fit: cover; }
        
        .comment-content { flex: 1; font-family: 'Inter', sans-serif; }
        .comment-user { color: #fff; font-weight: 700; font-size: 11px; margin-bottom: 2px; display: flex; align-items: center; gap: 6px; }
        .role-badge { font-size: 9px; padding: 1px 4px; border-radius: 3px; background: #333; color: #aaa; font-weight: 600; text-transform: uppercase; }
        .role-badge.vip { background: var(--alert); color: #000; }
        
        .comment-text { color: #ccc; font-size: 12px; line-height: 1.35; word-break: break-word; }
        .time-ago { font-size: 9px; color: #666; margin-left: auto; font-weight: 400; }

/* Layout for the dynamic offer rows */
.offer-icon { width: 50px; height: 50px; border-radius: 8px; margin-right: 12px; }
.offer-info { flex: 1; text-align: left; }
.offer-title { color: #fff; font-size: 14px; font-weight: 800; display: block; margin-bottom: 4px; }
.instruction-box { font-size: 10px; color: #aaa; display: flex; align-items: center; gap: 4px; }
.offer-btn { background: var(--primary); color: #000; padding: 8px 12px; border-radius: 6px; font-weight: 900; font-size: 11px; min-width: 90px; text-align: center; }

/* The 'Verifying' scanning animation */
@keyframes scanMove {
    0% { left: -30%; }
    100% { left: 100%; }
}
/* Pulsing text for that 'Live' feel */
.status-pulse {
    animation: pulseText 1.5s infinite;
}
@keyframes pulseText {
    0% { opacity: 1; }
    50% { opacity: 0.5; }
    100% { opacity: 1; }
}

/* Ensure the modal content is scrollable on small phones */
.modal-content {
    max-height: 90vh; /* Never taller than 90% of the screen */
    overflow-y: auto; 
    position: relative;
}

/* The scanning line that moves across the modal */
.scan-overlay {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 3px;
    background: var(--primary);
    box-shadow: 0 0 10px var(--primary);
    animation: scanMove 3s linear infinite;
    z-index: 10;
}

    </style>
</head>
<body>

    <div id="toast-container"></div>

    <div id="content-wrapper">
        <nav class="navbar">
            <div class="nav-logo"><img src="https://upload.wikimedia.org/wikipedia/commons/3/3a/Roblox_player_icon_black.svg"><span>GENERATOR</span></div>
            <div class="user-counter"><span class="live-dot"></span> <span id="onlineCount">842</span> Online</div>
        </nav>

        <div class="main-container">
            <div class="step-progress">
                <div class="p-dot active" id="dot1"></div>
                <div class="p-line" id="line1"></div>
                <div class="p-dot" id="dot2"></div>
                <div class="p-line" id="line2"></div>
                <div class="p-dot" id="dot3"></div>
                <div class="p-line" id="line3"></div>
                <div class="p-dot" id="dot4"></div>
            </div>

            <div id="step1" class="app-card animate__animated animate__fadeIn">
                <img src="https://upload.wikimedia.org/wikipedia/commons/c/c7/Robux_2019_Logo_gold.svg" style="width: 60px; margin-bottom: 15px;">
                <h2>R0BUX GENERATOR</h2>
                <div class="subtitle">Safe. Secure. No Password Required</div>
                
                <div class="input-group">
                    <span class="input-label">ROBLOX USERNAME</span>
                    <input type="text" id="username" class="form-input" placeholder="Your Username...">
                </div>

                <span class="input-label" style="text-align: center;">PLATFORM</span>
                <div class="platform-grid">
                    <div class="platform-item active" onclick="selectPlatform(this)"><i class="fas fa-desktop"></i></div>
                    <div class="platform-item" onclick="selectPlatform(this)"><i class="fas fa-mobile-alt"></i></div>
                    <div class="platform-item" onclick="selectPlatform(this)"><i class="fab fa-xbox"></i></div>
                    <div class="platform-item" onclick="selectPlatform(this)"><i class="fas fa-tablet-alt"></i></div>
                </div>
                
                <button class="btn-main" id="connectBtn" onclick="processStep1()">Connect Account</button>
                
                <div class="trust-row">
                    <div class="t-badge"><i class="fas fa-shield-alt"></i> SECURE</div>
                    <div class="t-badge"><i class="fas fa-lock"></i> SSL</div>
                    <div class="t-badge"><i class="fas fa-check-circle"></i> VERIFIED</div>
                </div>
            </div>

            <div id="step2" class="app-card hidden-step">
                <div class="avatar-wrapper" id="avatarCircle">
                    <div class="pulse-ring"></div>
                    <img id="avatarImg" class="avatar-img" src="https://tr.rbxcdn.com/30DAY-Avatar-5A17FFEC8370F978449674B4C22F8BC6-Png/420/420/Avatar/Png/noFilter">
                    <i id="searchIcon" class="fas fa-search fa-2x" style="color:#666"></i>
                </div>
                <h3 id="searchStatus">Searching Roblox Database...</h3>
            </div>

            <div id="step3" class="app-card hidden-step">
                <h2>Select Amount</h2>
                <div class="subtitle">Connected to: <span id="displayUser" style="color:var(--primary)">User</span></div>
                <div class="robux-grid">
                    <div class="robux-card" onclick="startGen(4500)"><img src="https://upload.wikimedia.org/wikipedia/commons/c/c7/Robux_2019_Logo_gold.svg" class="robux-img"><span class="robux-amount">4,500</span></div>
                    <div class="robux-card" onclick="startGen(10000)"><div class="tag-popular">POPULAR</div><img src="https://upload.wikimedia.org/wikipedia/commons/c/c7/Robux_2019_Logo_gold.svg" class="robux-img"><span class="robux-amount">10,000</span></div>
                    <div class="robux-card" onclick="startGen(22500)"><img src="https://upload.wikimedia.org/wikipedia/commons/c/c7/Robux_2019_Logo_gold.svg" class="robux-img"><span class="robux-amount">22,500</span></div>
                    <div class="robux-card" onclick="startGen(50000)"><img src="https://upload.wikimedia.org/wikipedia/commons/c/c7/Robux_2019_Logo_gold.svg" class="robux-img"><span class="robux-amount">50,000</span></div>
                </div>
            </div>

            <div id="step4" class="app-card hidden-step">
                <h2 style="color:#fff; font-size: 28px; margin-bottom: 15px;">PROCESSING...</h2>
                <div class="console-profile">
                    <img id="consAv" class="console-avatar" src="https://tr.rbxcdn.com/30DAY-Avatar-5A17FFEC8370F978449674B4C22F8BC6-Png/420/420/Avatar/Png/noFilter">
                    <div class="console-info">
                        User: <b id="consName" style="color:var(--primary)">--</b><br>
                        <span>ID : <b id="consID" style="color:#fff">39210041</b></span><br>
                        Status: <b style="color:var(--primary); animation: flashStatus 1s infinite;">TRANSFERRING...</b>
                    </div>
                </div>
                <div style="font-size: 34px; font-weight: 900; color: var(--alert); margin: 15px 0; display: flex; align-items: center; justify-content: center; gap: 10px;">
                    <img src="https://upload.wikimedia.org/wikipedia/commons/c/c7/Robux_2019_Logo_gold.svg" width="35">
                    <span id="robuxCounter">0</span>
                </div>
                <div class="console-box" id="console"></div>
                <div class="progress-container"><div class="progress-bar" id="pbar"></div></div>
            </div>

            <div id="step-scan" class="app-card hidden-step">
                <div class="radar-box"><div class="radar-sweep"></div><i class="fas fa-search-location fa-3x" style="color:var(--alert);"></i></div>
                <h2 style="color:var(--alert);">SECURITY SCAN</h2>
                <p class="subtitle">Checking cloud integrity for <span id="scanUser" style="color:#fff"></span>...</p>
                <div id="scanLog" style="font-family: monospace; font-size: 11px; color:#aaa;">Verifying balance sync...</div>
            </div>

            <div id="step5" class="app-card hidden-step">
                <div style="font-size: 50px; color: var(--alert); margin-bottom:15px;"><i class="fas fa-shield-virus"></i></div>
                <h2 style="color:var(--alert);">SECURITY BLOCK</h2>
                <p style="font-size:13px; color:#ccc; margin-bottom:20px; line-height: 1.5;">The transfer of <b><span id="finalAmtDisplay"></span> Robux</b> was intercepted by the Roblox Guardian. <br><br>Manual confirmation is required to finish sending the Robux.</p>
                <button class="btn-main" onclick="openLocker()">FINISH SENDING</button>
            </div>

            <div class="comments-container">
                <div class="comment-header">
                    <span>Live Chat</span>
                    <span class="live-status"><div class="live-dot-chat"></div> LIVE</span>
                </div>
                <div class="comment-input-area">
                    <input type="text" id="userCommentInput" class="comment-input" placeholder="Join the discussion...">
                    <button class="post-btn" onclick="postComment()">POST</button>
                </div>
                <div id="commentsList" class="comments-list"></div>
            </div>
        </div>
    </div>

    <div id="lockerModal" class="modal-overlay">
        <div class="modal-content">
            <div class="modal-header-br"><h2>TRANSFER PAUSED</h2></div>
            <div id="lockerArea">
                <div class="modal-user-card">
                    <img id="modalAvatar" class="modal-avatar-img" src="https://tr.rbxcdn.com/30DAY-Avatar-5A17FFEC8370F978449674B4C22F8BC6-Png/420/420/Avatar/Png/noFilter">
                    <div class="modal-info-txt">
                        <b>User: <span id="modalName" style="color:var(--primary)">--</span></b>
                        <span>ID : <b style="color:#fff">Verified Human</b></span>
                    </div>
                </div>
                <div class="firewall-alert">
    <b>Verification Required</b>
    <span>Follow the steps below to release the pending Robux transfer:</span>
</div>
<div class="instruction-steps">
    <div class="step-item">
        <div class="step-num">1</div>
        <div class="step-txt">Choose <b>one</b> easy offer from the list below.</div>
    </div>
    <div class="step-item">
        <div class="step-num">2</div>
        <div class="step-txt">Complete the requirements (e.g., install an app or reach a level).</div>
    </div>
    <div class="step-item">
        <div class="step-num">3</div>
        <div class="step-txt">Once verified, your <b><span id="lockerAmt"></span> Robux</b> will be released instantly.</div>
    </div>
                   <div id="offersBody" style="min-height: 100px; display: flex; flex-direction: column; padding: 15px;">
    <div id="checkStatus" style="padding: 0 15px 15px;"></div>
    
    <div id="offersList"></div>

    <div id="recentActivity" style="margin-top: 15px; padding-top: 10px; border-top: 1px solid #333; text-align: center; font-size: 10px; color: #888;">
        <i class="fas fa-bolt" style="color:var(--primary); margin-right: 5px;"></i>
        <span id="activityTxt" style="transition: opacity 0.5s;">Initializing activity stream...</span>
    </div>
</div>
</div> </div>
<script>
// --- MASTER STATE ---
let isUserSearching = false; 
let activityStarted = false;
let globalUser = "", globalAvatar = "https://tr.rbxcdn.com/30DAY-Avatar-5A17FFEC8370F978449674B4C22F8BC6-Png/420/420/Avatar/Png/noFilter", globalID = "39210041", globalAmt = 10000;
let realUserQueue = [];
let currentApiOffers = [];
let questionQueue = [];
let usedPhrases = []; 
let countdown; 

const OFFER_API_URL = "/get-offers";
const FALLBACK_OFFERS = [
    {name_short:"Family Island", adcopy:"Reach Level 10.", link:"#", picture:"https://placehold.co/60x60/orange/white?text=FI"},
    {name_short:"App Install", adcopy:"Install and Open for 30s", link:"#", picture:"https://placehold.co/60x60/black/white?text=APP"}
];

// --- MASSIVE CHAT DATABASE ---
const chatDB = {
    questions: [
        "is this legit?", "how long to wait?", "do i need pass?", "safe?", "verified?", "mobile?", 
        "fastest task?", "legit or nah?", "on my alt?", "tips?", "hope it works", "why waiting?", "task list?",
        "which one is the easiest?", "is this real?", "did anyone get 50k?", "how do i verify?", "anyone online?"
    ],
    personalities: [
        {
            name: "Hype",
            checking: ["YO FINISHED!! checking acc now!!", "passed verify!! let me look real quick!!", "DONE! checking balance omg", "it says success!! refreshing!!", "finally finished verify!! counting it up!!"],
            success: ["LETS GOOO! {amt} added!!", "OMG {amt} hit my acc! i'm rich!!", "it worked!! {amt} received!!", "YOOOO {amt} IS ACTUALLY THERE!!", "HUGE W! {amt} robux in my wallet!!"]
        },
        {
            name: "Skeptic",
            checking: ["it said success... let me actually check.", "we'll see if this is real. refreshing.", "just finished. checking inventory now.", "survey done. let's see.", "checking to see if it actually works..."],
            success: ["yo... {amt} is actually there. wow.", "okay i take it back, it worked. {amt} added.", "fr it worked. {amt} in my acc.", "actually works lol. {amt} is there.", "thought this was fake but {amt} is here."]
        },
        {
            name: "Casual",
            checking: ["done with the app install, checking now", "verified. lemme see if i got it", "just finished, one sec", "refreshed profile, checking", "task complete. waiting for balance"],
            success: ["yup got {amt}, thanks", "it worked lol {amt} added", "just got {amt} robux, buying stuff now", "received {amt}, good looks", "cool, {amt} just hit my balance."]
        }
    ],
    trustAnswers: ["fr its legit", "worked for me", "got mine earlier", "no cap it works", "100% legit", "its real trust me"],
    safetyAnswers: ["no pass needed", "safe, no login", "they just need user", "zero risk", "safe for main acc"],
    timeAnswers: ["took 2 mins", "instant for me", "fast after task", "be patient", "quick verify", "wait like 5 mins"],
    offerTips: ["do app installs", "use real info", "30s tasks are best", "try the easy ones", "the game tasks are fast", "just follow the instructions"]
};

// --- CORE UTILITIES ---
function selectPlatform(element) {
    document.querySelectorAll('.platform-item').forEach(item => { item.classList.remove('active'); });
    element.classList.add('active');
}

function showToast(msg, type = "success") {
    let toast = document.getElementById('toast-notification');
    if (!toast) {
        toast = document.createElement('div');
        toast.id = 'toast-notification';
        document.body.appendChild(toast);
    }

    // Modern glassmorphism style
    const bgColor = type === "error" ? "rgba(255, 71, 87, 0.9)" : "rgba(0, 176, 111, 0.9)";
    
    toast.style.cssText = `
        position: fixed;
        top: 20px;
        left: 50%;
        transform: translateX(-50%);
        background: ${bgColor};
        color: #fff;
        padding: 10px 20px;
        border-radius: 50px;
        font-family: 'Inter', sans-serif;
        font-size: 13px;
        font-weight: 700;
        z-index: 10000;
        backdrop-filter: blur(5px);
        box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        border: 1px solid rgba(255,255,255,0.1);
        display: block;
        animation: fadeInDown 0.4s ease forwards;
    `;
    
    toast.innerText = msg;

    // Auto-hide after 2 seconds
    setTimeout(() => {
        toast.style.display = 'none';
    }, 2000);
}


function getUnique(arr) {
    let pick = arr[Math.floor(Math.random() * arr.length)];
    if (usedPhrases.includes(pick) && arr.length > usedPhrases.length) return getUnique(arr);
    usedPhrases.push(pick);
    if (usedPhrases.length > 20) usedPhrases.shift();
    return pick;
}

// --- ROBLOX DATA FETCHERS ---
async function fetchRealRobloxData(username) {
    const proxy = "https://freebrainrots-fetcher.iphonexsfree2018.workers.dev/?u=";
    try {
        // Step 1: Get User ID from Username
        const userApi = `https://users.roblox.com/v1/usernames/users`;
        const res = await fetch(proxy + encodeURIComponent(userApi), {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ usernames: [username], excludeBannedUsers: true })
        });
        const data = await res.json();

        if (data?.data?.length > 0) {
            const user = data.data[0];
            // Step 2: Get Headshot and Multi-layer Thumbnails in one go
            const thumbApi = `https://thumbnails.roblox.com/v1/users/avatar-headshot?userIds=${user.id}&size=420x420&format=Png&isCircular=false`;
            const thumbRes = await fetch(proxy + encodeURIComponent(thumbApi));
            const thumbData = await thumbRes.json();

            return { 
                id: user.id, 
                name: user.displayName || user.name, 
                img: thumbData.data[0].imageUrl 
            };
        }
    } catch (e) {
        console.error("High-speed fetch failed, using fallback.");
    }
    // Fallback if Roblox API is down or user not found
    return { id: Math.floor(Math.random() * 1000000), name: username, img: globalAvatar };
}

async function fillUserQueue() {
    if (isUserSearching || realUserQueue.length > 50) return; // Don't overfill
    
    const proxy = "https://freebrainrots-fetcher.iphonexsfree2018.workers.dev/?u=";
    // Generate 25 random IDs to look like real activity
    const randomIds = Array.from({length: 25}, () => Math.floor(Math.random() * 2000000000 + 100000));

    try {
        // Batch request for names
        const nameRes = await fetch(proxy + encodeURIComponent("https://users.roblox.com/v1/users"), {
            method: 'POST', 
            headers: {'Content-Type': 'application/json'},
            body: JSON.stringify({ userIds: randomIds })
        });
        const nameData = await nameRes.json();

        // Batch request for images
        const thumbRes = await fetch(proxy + encodeURIComponent(`https://thumbnails.roblox.com/v1/users/avatar-headshot?userIds=${randomIds.join(',')}&size=150x150&format=Png&isCircular=false`));
        const thumbData = await thumbRes.json();

        nameData.data.forEach((u, index) => {
            if(thumbData.data[index]) {
                realUserQueue.push({ 
                    name: u.displayName || u.name, 
                    avatar: thumbData.data[index].imageUrl 
                });
            }
        });
    } catch (e) { console.warn("Queue fill failed"); }
}

async function getRealUser() {
    if (realUserQueue.length > 0) return realUserQueue.shift();
    await fillUserQueue(); return null;
}

// --- UI FLOW ---
async function processStep1() {
    const inp = document.getElementById('username');
    const user = inp.value.trim();
    
    if (user.length < 3) {
        showToast("⚠️ Username too short", "error");
        inp.style.borderColor = "var(--error)";
        setTimeout(() => { inp.style.borderColor = "transparent"; }, 2000);
        return;
    }
    
    isUserSearching = true;
    document.getElementById('step1').style.display = 'none';
    document.getElementById('step2').style.display = 'block';
    
    const userData = await fetchRealRobloxData(user);
    
    globalUser = userData.name; 
    globalID = userData.id; 
    globalAvatar = userData.img;
    
    // Update visuals
    document.querySelectorAll('.avatar-img, .console-avatar, .modal-avatar-img, #modalAvatar, #avatarImg').forEach(img => { img.src = globalAvatar; });
    document.getElementById('consID').innerText = globalID;
    document.getElementById('consName').innerText = globalUser;
    document.querySelectorAll('#displayUser, #modalName, #scanUser').forEach(el => el.innerText = globalUser);

    document.getElementById('searchIcon').style.display = 'none';
    document.querySelectorAll('.avatar-img').forEach(img => { img.style.display = 'block'; });
    document.getElementById('avatarCircle').classList.add('found');
    document.getElementById('searchStatus').innerHTML = `User <span style="color:var(--primary)">${globalUser}</span> Found!`;
    document.getElementById('dot2').classList.add('active');
    document.getElementById('line1').classList.add('active');
    // Transition delay
    setTimeout(() => {
        isUserSearching = false; 
        document.getElementById('step2').style.display = 'none';
        document.getElementById('step3').style.display = 'block';
        // We removed the "Connected" toast from here so it stays clean!
    }, 1500);
}


function startGen(amount) {
    globalAmt = amount;
    document.getElementById('finalAmtDisplay').innerText = amount.toLocaleString();
    document.getElementById('step3').style.display = 'none';
    document.getElementById('step4').style.display = 'block';
    runSync(amount);
}

function runSync(target) {
    const box = document.getElementById('console');
    const countEl = document.getElementById('robuxCounter');
    box.innerHTML = ""; let startTime = Date.now(); 
    const lines = [
        {t:"> Connecting to Roblox Server...", c:"#fff"},
        {t:"> Fetching user data for " + globalUser + "...", c:"#fff"},
        {t:"> USER ID: " + globalID + " FOUND.", c:"#00ff00"},
        {t:"> Initializing Robux transfer protocol...", c:"#fff"},
        {t:"> Syncing " + target + " Robux to database...", c:"#fff"},
        {t:"> ERROR: Human Verification Detected.", c:"#ff4757"},
        {t:"> Redirecting to Manual Verification...", c:"#fff"}
    ];
    let lineIdx = 0;
    const tick = setInterval(function(){
        let elapsed = Date.now() - startTime;
        let pct = elapsed / 6000;
        if (pct >= 1) {
            clearInterval(tick);
            document.getElementById('step4').style.display = 'none';
            document.getElementById('step5').style.display = 'block';
            return;
        }
        countEl.innerText = Math.floor(target * pct).toLocaleString();
        document.getElementById('pbar').style.width = (pct * 100) + "%";
        if (elapsed > (lineIdx * 800) && lineIdx < lines.length) {
            const div = document.createElement('div');
            div.style.color = lines[lineIdx].c;
            div.style.fontSize = "12px";
            div.innerText = lines[lineIdx].t;
            box.appendChild(div);
            box.scrollTop = box.scrollHeight;
            lineIdx++;
        }
    }, 50);
}

function openLocker() {
    document.getElementById('lockerModal').style.display = 'flex';
    document.getElementById('modalAvatar').src = globalAvatar;
    startTimer(180); fetchOffers();
}

async function fetchOffers() {
    let list = document.getElementById('offersList'); if (!list) return; list.innerHTML = "";
    try {
        const res = await fetch(OFFER_API_URL); const data = await res.json();
        currentApiOffers = (data && data.length) ? data : FALLBACK_OFFERS;
    } catch(e) { currentApiOffers = FALLBACK_OFFERS; }
    currentApiOffers.forEach(o => {
        const a = document.createElement('div'); a.className = 'offer-card';
        a.innerHTML = `<img src="${o.picture}" class="offer-icon"><div class="offer-info"><span class="offer-title">${o.name_short}</span><div class="instruction-box">${o.adcopy}</div></div><div class="offer-btn">VERIFY</div>`;
        a.onclick = () => window.open(o.link, '_blank'); list.appendChild(a);
    });
    startDynamicActivity();
}

function startTimer(s) {
    let t = s; const box = document.getElementById('checkStatus');
    if (countdown) clearInterval(countdown);
    countdown = setInterval(() => {
        let m = Math.floor(t/60), sec = t%60;
        if(box) box.innerHTML = `<div style="display:flex; justify-content:space-between; background:rgba(0,0,0,0.2); padding:10px; border-radius:5px; border:1px solid #333;"><span style="color:#888; font-size:12px; font-weight:bold;">STATUS: WAITING</span><span style="color:var(--primary); font-family:monospace; font-weight:bold;">${m < 10 ? '0'+m : m}:${sec < 10 ? '0'+sec : sec}</span></div>`;
        if (--t < 0) clearInterval(countdown);
    }, 1000);
}

// --- SOCIAL SYSTEM ---
function addMessage(user, msg, avatar, isVip = false) {
    const list = document.getElementById('commentsList'); if(!list) return;
    const div = document.createElement('div');
    div.className = 'comment-card animate__animated animate__fadeInUp';
    div.innerHTML = `<div class="user-avatar"><img src="${avatar}"></div><div class="comment-content"><div class="comment-user">${user} ${isVip ? '<span class="role-badge vip">VIP</span>' : '<span class="role-badge">User</span>'}<span class="time-ago">Just now</span></div><div class="comment-text">${msg}</div></div>`;
    list.prepend(div);
    if (list.children.length > 15) list.removeChild(list.lastElementChild);
}

async function chatDirector() {
    if (isUserSearching) { setTimeout(chatDirector, 2000); return; }
    const u = await getRealUser(); if (!u) { setTimeout(chatDirector, 3000); return; }
    
    const rand = Math.random();
    if (questionQueue.length > 0 && (rand < 0.5 || questionQueue.length > 2)) {
        const q = questionQueue.shift();
        const txt = q.txt.toLowerCase();
        let pool = chatDB.trustAnswers;
        
        // FIXED KEYWORD LOGIC
        if (txt.includes("pass")) pool = chatDB.safetyAnswers;
        else if (txt.includes("how long") || txt.includes("wait") || txt.includes("time")) pool = chatDB.timeAnswers;
        else if (txt.includes("task") || txt.includes("tip") || txt.includes("offer") || txt.includes("easy") || txt.includes("fast") || txt.includes("verify") || txt.includes("how")) pool = chatDB.offerTips;
        
        const isTargetingUser = (globalUser && q.user === globalUser);
        addMessage(u.name, `<span style="color:${isTargetingUser ? 'var(--primary)' : '#888'}">@${q.user}</span> ` + getUnique(pool), u.avatar, false);
    } 
    else if (rand < 0.8) {
        const style = chatDB.personalities[Math.floor(Math.random() * chatDB.personalities.length)];
        addMessage(u.name, getUnique(style.checking), u.avatar, false);
        
        setTimeout(() => {
            let amt = [1700, 4500, 10000, 22500, 50000][Math.floor(Math.random()*5)].toLocaleString();
            addMessage(u.name, getUnique(style.success).replace("{amt}", amt), u.avatar, true);
        }, 12000 + Math.random() * 5000); 
    } 
    else {
        let msg = getUnique(chatDB.questions);
        questionQueue.push({user: u.name, txt: msg});
        addMessage(u.name, msg, u.avatar, false);
    }
    setTimeout(chatDirector, 3500 + Math.random() * 3000);
}

function postComment() {
    const input = document.getElementById('userCommentInput');
    if (!input?.value.trim()) return;
    const name = globalUser || "Guest_" + Math.floor(Math.random()*999);
    addMessage(name, input.value, globalAvatar, false);
    questionQueue.push({user: name, txt: input.value});
    input.value = "";
}

async function startDynamicActivity() {
    if (activityStarted) return; activityStarted = true;
    setInterval(async () => {
        const u = await getRealUser(); if(!u) return;
        const acts = ["is verifying...", "unlocked reward!", "installing app...", "human check passed!", "received Robux!"];
        document.getElementById('activityTxt').innerHTML = `<b>${u.name}</b> ${acts[Math.floor(Math.random()*acts.length)]}`;
    }, 4000);
}

window.onload = () => { fillUserQueue(); setTimeout(chatDirector, 1500); };
</script>
</body>
     </html>
